<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <link rel="stylesheet" href="style.css">
	
</head>
<body>
    <div class="kentrarisma">
	    <button type="button" onclick="loadXMLDoc();showClass();">Εμφάνισε τη λίστα</button>
        <div class="buttons"style="display: block;"> 
            <button type="button" onclick="sortFoodTable(1)">Ταξινόμηση ανά Δημιουργός</button>
            <button type="button" onclick="sortByPrice(2)">Ταξινόμηση ανά Τιμή</button>
            <button type="button" onclick="sortByYear(3)">Ταξινόμηση ανά Έτος Δημιουργίας</button>
        </div>
        <br><br>
        <table id="foodTable" style="display: block;"></table>
        <h3 id="foodHeader" style="display: block;">ΠΑΡΑΔΟΣΙΑΚΑ ΦΑΓΗΤΑ</h3>
        <p id="sorted_food_list"></p>
    </div>

    <script>
        
		 function loadXMLDoc() {

                var header3 = document.getElementById('buttons');
                header3.style.display = "block"; 
                document.getElementById('foodHeader').style.display = "block";
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        myFunction(this);
                    }
                };
                xmlhttp.open("GET", "data.xml", true);
                xmlhttp.send();
				  }
            
			function showClass() {
                    var x = document.getElementsByClassName("kentrarisma");
                    for (var i = 0; i < x.length; i++) {
                        x[i].style.display = "block";
                    }
				}
				
			function myFunction(xml) {
                var arr =  new Array(); 
                var i;
                var xmlDoc = xml.responseXML;
                var table="<tr><th>name</th><th>creator</th><th>year</th><th>price €</th></tr>";
                var x = xmlDoc.getElementsByTagName("food");
                
                for (i = 0; i <x.length; i++) { 
                    table += "<tr><td>" +
                        x[i].getElementsByTagName("creator")[0].childNodes[0].nodeValue +
                        "</td><td>" +
                        x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue +
                        "</td><td>" +
                        x[i].getElementsByTagName("year")[0].childNodes[0].nodeValue +
                        "</td><td>" +
                        x[i].getElementsByTagName("price")[0].childNodes[0].nodeValue +
                        "</td></tr>";
                    arr[i]=x[i].getElementsByTagName("creator")[0].childNodes[0].nodeValue + ":" + x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue; 
                }
                document.getElementById("foodTable").innerHTML = table;
                arr.sort();
                document.getElementById("sorted_list").innerHTML = arr; 
            }
            
			       {
			var header = document.getElementById('foodHeader');
            header.style.display = "block"; 
            var table = document.getElementById("foodTable");
            table.style.display = "block";
            var foods = [
                { name: "Μουσακάς", creator: "Ελλάδα", year: "1950", price: "8.50" },
                { name: "Σουβλάκι", creator: "Ελλάδα", year: "1900", price: "6.00" },
                { name: "Γύρος", creator: "Ελλάδα", year: "1960", price: "5.50" },
                { name: "Μπακαλιάρος", creator: "Πορτογαλία", year: "1850", price: "12.00" },
                { name: "Σαγανάκι", creator: "Ελλάδα", year: "1860", price: "7.50" },
                { name: "Τζατζίκι", creator: "Ελλάδα", year: "1990", price: "4.50" },
                { name: "Κοτόπουλο Λεμονάτο", creator: "Ελλάδα", year: "1994", price: "9.00" },
                { name: "Χοιρινό Κοκκινιστό", creator: "Ελλάδα", year: "1900", price: "10.00" },
                { name: "Μελιτζάνες Γεμιστές", creator: "Ελλάδα", year: "1855", price: "6.50" }
            ];
            var tableContent = "<tr><th>name</th><th>creator</th><th>year</th><th>price €</th></tr>";

            for (var i = 0; i < foods.length; i++) {
                tableContent += "<tr><td>" + foods[i].name + "</td><td>" + foods[i].creator + "</td><td>" + foods[i].year + "</td><td>" + foods[i].price + "</td></tr>";
            }

            table.innerHTML = tableContent;
        }


        function sortFoodTable(n) {
    var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
    table = document.getElementById("foodTable");
    switching = true;
    dir = "asc";

    while (switching) {
        switching = false;
        rows = table.rows;
        shouldSwitch = false; 

        for (i = 1; i < (rows.length - 1); i++) {
            x = rows[i].getElementsByTagName("td")[n];
            y = rows[i + 1].getElementsByTagName("td")[n];

            if (dir == "asc") {
                if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                    shouldSwitch = true;
                    break;
                }
            } else if (dir == "desc") {
                if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                    shouldSwitch = true;
                    break;
                }
            }
        }

        if (shouldSwitch) {
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
            switchcount++;
        } else {
            if (switchcount == 0 && dir == "asc") {
                dir = "desc";
                switching = true;
            }
        }
    }
}

        function sortByPrice() {
            var table, rows, switching, i, x, y, shouldSwitch;
            table = document.getElementById("foodTable");
            switching = true;

            while (switching) {
                switching = false;
                rows = table.rows;

                for (i = 1; i < (rows.length - 1); i++) {
                    shouldSwitch = false;
                    x = parseFloat(rows[i].getElementsByTagName("td")[3].innerHTML);
                    y = parseFloat(rows[i + 1].getElementsByTagName("td")[3].innerHTML);

                    if (x > y) {
                        shouldSwitch = true;
                        break;
                    }
                }

                if (shouldSwitch) {
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                }
            }
        }

        function sortByYear() {
            var table, rows, switching, i, x, y, shouldSwitch;
            table = document.getElementById("foodTable");
            switching = true;

            while (switching) {
                switching = false;
                rows = table.rows;

                for (i = 1; i < (rows.length -1 ); i++) {
                    shouldSwitch = false;
                    x = parseInt(rows[i].getElementsByTagName("td")[2].innerHTML);
                    y = parseInt(rows[i + 1].getElementsByTagName("td")[2].innerHTML);

                    if (x < y) {
                        shouldSwitch = true;
                        break;
                    }
                }

                if (shouldSwitch) {
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                }
            }
        }
    </script>
</body>
</html>